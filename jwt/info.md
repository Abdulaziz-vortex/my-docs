# JWT (JSON Web Token)

## üìå –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
**JWT (JSON Web Token)** ‚Äî —ç—Ç–æ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ –≤ –≤–∏–¥–µ JSON-–æ–±—ä–µ–∫—Ç–∞. –û–Ω –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ **RFC 7519**
- –°–æ—Å—Ç–æ–∏—Ç –∏–∑ **—Ç—Ä–µ—Ö —á–∞—Å—Ç–µ–π**: –∑–∞–≥–æ–ª–æ–≤–∫–∞ (header), –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (payload) –∏ –ø–æ–¥–ø–∏—Å–∏ (signature)
- –ú–æ–∂–µ—Ç –±—ã—Ç—å **–ø–æ–¥–ø–∏—Å–∞–Ω (HMAC, RSA, ECDSA)** –∏–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω
- –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω: —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

## üìå –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
‚úÖ –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ  
‚úÖ –õ–µ–≥–∫–∏–π –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π ‚Äî —É–¥–æ–±–µ–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  
‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω –∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏  
‚úÖ –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **OAuth 2.0, OpenID Connect**  
‚úÖ –ü—Ä–æ—Å—Ç –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

## üìå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ **–æ—Ç–æ–∑–≤–∞—Ç—å** —Ç–æ–∫–µ–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è  
‚ùå –ï—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –∑–∞–≤–ª–∞–¥–µ–µ—Ç —Ç–æ–∫–µ–Ω–æ–º, –æ–Ω —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞  
‚ùå –î–ª–∏–Ω–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ–ª—å—à–µ, —á–µ–º —É –æ–±—ã—á–Ω—ã—Ö session ID

## üìå –ü—Ä–∏–º–µ—Ä JWT
```eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEyMywiZXhwIjoxNjk1Njk5OTk5fQ.2dHe5D6M1Ym-Pq7j29g3-Z4DCs9c-3pQWTfV5tNpRM8```

### –†–∞–∑–±–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JWT
1. **Header (–∑–∞–≥–æ–ª–æ–≤–æ–∫)**
```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```
2. **Payload (–ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)**
```json
{
  "userId": 123,
  "exp": 1695699999
}
```
3. **Signature (–ø–æ–¥–ø–∏—Å—å)**
```
HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload), secret)
```

## üìå –ü–æ—á–µ–º—É JWT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Ç–∞–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω?
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏, JWT –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –ø–æ —Ä—è–¥—É –ø—Ä–∏—á–∏–Ω:

1Ô∏è‚É£ **–ë—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏–µ**: JWT –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–µ—Å—Å–∏–π. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤.

2Ô∏è‚É£ **–£–¥–æ–±—Å—Ç–≤–æ**: –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

3Ô∏è‚É£ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏**: –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö JWT –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å–∞–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å–µ—Å—Å–∏–π.

4Ô∏è‚É£ **–ì–∏–±–∫–æ—Å—Ç—å**: JWT –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–æ –∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞.

## üìå –ö–∞–∫ –ø–æ–≤—ã—Å–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å JWT?
üîí **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** ‚Äî –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫ MITM  
üîí **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ (exp)** ‚Äî —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞  
üîí **–•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ (HttpOnly, Secure cookies)**  
üîí **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ refresh-—Ç–æ–∫–µ–Ω—ã** ‚Äî –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö JWT  
üîí **–í—ã–±–∏—Ä–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–¥–ø–∏—Å–∏ (RS256, ES256)**

## üìå –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JWT?
- –î–ª—è **–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ OAuth 2.0, OpenID Connect)
- –í **—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö** (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –º–æ–±–∏–ª—å–Ω—ã–µ –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–µ–±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

üöÄ **JWT ‚Äî —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ –µ–≥–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å —É–º–æ–º!**



–°—Ç–∞—Ç–∏ : 
1. https://habr.com/ru/articles/340146